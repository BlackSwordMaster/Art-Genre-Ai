<!DOCTYPE html>
<html>
<head>
  <title>ðŸŽ¨ What Art Genre Are You?</title>
  <meta charset="UTF-8" />
  <style>
    body { font-family: sans-serif; text-align: center; padding: 40px; }
    .question { margin-bottom: 25px; }
    label { display: block; margin: 5px; }
    button { padding: 10px 20px; font-size: 1rem; margin-top: 20px; }
    #output { margin-top: 30px; font-weight: bold; font-size: 1.2rem; }
  </style>
</head>
<body>
  <h1>ðŸŽ­ Personality Art Quiz</h1>
  <form id="quizForm" onsubmit="submitQuiz(event)">
    
    <div class="question">
      <h3>1. How would you describe your personality?</h3>
      <label><input type="checkbox" name="personality" value="calm"> Calm</label>
      <label><input type="checkbox" name="personality" value="energetic"> Energetic</label>
      <label><input type="checkbox" name="personality" value="mysterious"> Mysterious</label>
      <label><input type="checkbox" name="personality" value="bold"> Bold</label>
    </div>

    <div class="question">
      <h3>2. Favorite color palette?</h3>
      <label><input type="checkbox" name="colors" value="pastels"> Pastels</label>
      <label><input type="checkbox" name="colors" value="bold primaries"> Bold primaries</label>
      <label><input type="checkbox" name="colors" value="earth tones"> Earth tones</label>
      <label><input type="checkbox" name="colors" value="neon"> Neon</label>
    </div>

    <div class="question">
      <h3>3. What setting inspires you most?</h3>
      <label><input type="checkbox" name="setting" value="forest"> Forest</label>
      <label><input type="checkbox" name="setting" value="urban"> City/Urban</label>
      <label><input type="checkbox" name="setting" value="space"> Space</label>
      <label><input type="checkbox" name="setting" value="dreamlike scenes"> Dreamlike scenes</label>
    </div>

    <div class="question">
      <h3>4. Favorite type of music?</h3>
      <label><input type="checkbox" name="music" value="classical"> Classical</label>
      <label><input type="checkbox" name="music" value="hip hop"> Hip hop</label>
      <label><input type="checkbox" name="music" value="indie"> Indie</label>
      <label><input type="checkbox" name="music" value="electronic"> Electronic</label>
    </div>

    <button type="submit">Reveal My Art Genre</button>
  </form>

  <p id="output"></p>

  <script>
    function submitQuiz(event) {
      event.preventDefault();
      const form = document.getElementById("quizForm");
      const formData = new FormData(form);
      const resultBox = document.getElementById("output");

      let summary = [];

      for (let [name, value] of formData.entries()) {
        summary.push(value);
      }

      const finalPrompt = `Based on the following personality quiz traits: ${summary.join(", ")}, what genre of art would this person be best at and why? Respond in this format: 'Genre: [name] - [one-line description]'`;

      resultBox.textContent = "Thinking... ðŸŽ¨";

      fetch("/genre", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ prompt: finalPrompt })
      })
      .then(res => res.json())
      .then(data => {
        resultBox.textContent = data.genre || "Oops! Something went wrong.";
      })
      .catch(err => {
        resultBox.textContent = "Something went wrong!";
        console.error(err);
      });
    }
  </script>
</body>
</html>